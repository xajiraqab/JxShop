(this.webpackJsonpjshop=this.webpackJsonpjshop||[]).push([[0],{26:function(t,e,c){},46:function(t,e,c){"use strict";c.r(e);var n=c(1),a=c.n(n),r=c(19),i=c.n(r),s=(c(26),c(2)),o=c(4),u=c(5),d=c.n(u),l=c(20),j=c(21),b=c(0),O=Object(n.createContext)({}),f=function(t){var e=Object(n.useState)({Value:0,Description:""}),c=Object(o.a)(e,2),a=(c[0],c[1],Object(n.useState)({Payment:0,PaymentNoDiscount:0,RealPayment:0,OrderDate:"",Description:"",OrderN:""})),r=Object(o.a)(a,2),i=r[0],u=r[1],l=Object(n.useState)([{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]),f=Object(o.a)(l,2),m=f[0],h=f[1],g=Object(n.useState)([]),x=Object(o.a)(g,2),p=x[0],P=x[1],v=Object(n.useState)([{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]),y=Object(o.a)(v,2),C=y[0],S=y[1];Object(n.useEffect)((function(){d.a.get("/api/products").then((function(t){return h(t.data)})),d.a.get("/api/categories").then((function(t){return S(t.data.filter((function(t){return t.Uid>1})))}))}),[]),Object(n.useEffect)((function(){var t=0;p.forEach((function(e){return t+=e.LinePrice})),u(Object(s.a)(Object(s.a)({},i),{},{Payment:t,PaymentNoDiscount:t}))}),[p]);var N=function(t,e){P((function(c){return[].concat(Object(j.a)(c),[{OrderQty:e,LinePrice:e*t.Price,LinePriceNoDiscount:e*t.Price,ProductUid:t.Uid,ProductName:t.ProductName,ProductCode:t.ProductCode,UnitPrice:t.Price,availableQty:t.Stock}])}))},U=function(t){return p.find((function(e){return e.ProductUid===t.Uid}))};return Object(b.jsx)(O.Provider,{value:{_orderHeader:i,_listProducts:m,_listDetails:p,_listCategories:C,_addProductInCart:N,_setProductQtyInCart:function(t,e){isNaN(e)||(e||P((function(e){return e.filter((function(e){return e.ProductUid!==t.ProductUid}))})),e=Math.max(Math.min(t.availableQty,e),Math.min(t.availableQty,1)),P((function(c){return c.map((function(c){return c.ProductUid===t.ProductUid?Object(s.a)(Object(s.a)({},c),{},{OrderQty:e,LinePrice:e*c.UnitPrice,LinePriceNoDiscount:e*c.UnitPrice}):c}))})))},_toggleProductInCart:function(t){h((function(e){return e.map((function(e){return e.Uid===t.Uid?Object(s.a)(Object(s.a)({},e),{},{isLoading:!0}):e}))})),d.a.get("https://jsonplaceholder.typicode.com/users").then((function(){U(t)?P((function(e){return e.filter((function(e){return e.ProductUid!==t.Uid}))})):N(t,1),h((function(e){return e.map((function(e){return e.Uid===t.Uid?Object(s.a)(Object(s.a)({},e),{},{isLoading:!1}):e}))}))})).catch((function(t){return console.log(t)}))},_isProductInCart:U,_clearCart:function(){return P([])}},children:t.children})},m=function(){var t=Object(n.useContext)(O),e=t._orderHeader,c=t._clearCart,a=t._listDetails,r=t._setProductQtyInCart,i=Object(n.useState)(!1),u=Object(o.a)(i,2),j=u[0],f=u[1],m=Object(n.useState)(0),h=Object(o.a)(m,2),g=h[0],x=h[1],p=Object(n.useState)({isLoading:!1,number:localStorage.getItem("number")||"",address:localStorage.getItem("address")||"",isSoldSuccessfully:!1}),P=Object(o.a)(p,2),v=P[0],y=P[1];Object(l.useEffect)((function(){j||x(0)}),[j]);var C=function(){c(),f(!1),x(0),y(Object(s.a)(Object(s.a)({},v),{},{isSoldSuccessfully:!1}))},S=function(t){t.preventDefault(),v.isSoldSuccessfully?C():x(1-g)};return a.length?Object(b.jsxs)("div",{className:"cartInfo anFadeIn",children:[j&&Object(b.jsx)("div",{onClick:function(){v.isSoldSuccessfully?C():f(!1)},className:"cartInfoCover"}),j&&Object(b.jsxs)("div",{className:"cartInfoContainer",children:[Object(b.jsxs)("div",{className:"cartInfoHeader",children:[Object(b.jsx)("h2",{children:"\u10d9\u10d0\u10da\u10d0\u10d7\u10d0"}),Object(b.jsx)("button",{className:"".concat(1===g?"flat":""),onClick:S,children:0===g?"\u10e8\u10d4\u10eb\u10d4\u10dc\u10d0":"\u2716"})]}),0===g?a.map((function(t){return Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("button",{className:"flat",onClick:function(){r(t,0),1===a.length&&f(!1)},children:"\u2716"}),Object(b.jsx)("img",{src:"https://images.unsplash.com/photo-1562952546-12992a813a51?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1171&q=80"}),Object(b.jsx)("p",{children:t.ProductName}),Object(b.jsx)("button",{className:"flat",onClick:function(){return r(t,Math.max(1,t.OrderQty-1))},children:"-"}),Object(b.jsx)("input",{type:"text",value:t.OrderQty,onChange:function(e){return r(t,Math.max(1,parseFloat(e.target.value)))}}),Object(b.jsx)("button",{className:"flat",onClick:function(){return r(t,t.OrderQty+1)},children:"+"})]},t.ProductUid)})):v.isSoldSuccessfully?Object(b.jsxs)("div",{style:{marginTop:"7em",textAlign:"center"},children:[Object(b.jsxs)("h1",{children:["\u10d7\u10e5\u10d5\u10d4\u10dc\u10d8 \u10e8\u10d4\u10d9\u10d5\u10d4\u10d7\u10d0 \u10db\u10d8\u10e6\u10d4\u10d1\u10e3\u10da\u10d8\u10d0 \ud83e\udd70 ",Object(b.jsx)("span",{style:{color:"#17AB23"},children:"\u10d3\u10d0\u10d4\u10da\u10dd\u10d3\u10d4\u10d7 \u10d6\u10d0\u10e0\u10e1"})]}),Object(b.jsx)("button",{onClick:S,children:"\u10d2\u10d0\u10e1\u10d0\u10d2\u10d4\u10d1\u10d8\u10d0 \ud83e\udd17"})]}):Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),v.isLoading||(y(Object(s.a)(Object(s.a)({},v),{},{isLoading:!0})),d.a.post("/api/createSellInvoice",{header:e,detail_list:a,payment:{Value:0,Description:""},customer:{Id:"999",Name:"jax",ShippingAdress:v.address,Email:"",Phone:v.number}}).then((function(t){"ERROR"===t.data.status&&alert(t.data.error_message);var e="OK"===t.data.status;y(Object(s.a)(Object(s.a)({},v),{},{isLoading:!1,isSoldSuccessfully:e})),e&&(localStorage.setItem("number",v.number),localStorage.setItem("address",v.address))})).catch((function(t){return console.log(t)})))},children:[Object(b.jsxs)("label",{className:"input",children:["\u10e2\u10d4\u10da\u10d4\u10e4\u10dd\u10dc\u10d8\u10e1 \u10dc\u10dd\u10db\u10d4\u10e0\u10d8",Object(b.jsx)("input",{name:"phone",type:"tel",value:v.number,onChange:function(t){return y(Object(s.a)(Object(s.a)({},v),{},{number:t.target.value}))}})]}),Object(b.jsxs)("label",{className:"input",children:["\u10db\u10d8\u10e1\u10d0\u10db\u10d0\u10e0\u10d7\u10d8",Object(b.jsx)("input",{name:"address",type:"text",value:v.address,onChange:function(t){return y(Object(s.a)(Object(s.a)({},v),{},{address:t.target.value}))}})]}),Object(b.jsx)("button",{className:"".concat(v.isLoading?"loading":""),children:"\u10e8\u10d4\u10d9\u10d5\u10d4\u10d7\u10d0"})]})})]}),Object(b.jsxs)("button",{style:{background:j?"#FCCEE5":void 0,color:j?"#FF6D99":void 0},onClick:function(){v.isSoldSuccessfully?C():f(!j)},children:[e.Payment.toFixed(2),"\u20be"]})]}):Object(b.jsx)(b.Fragment,{})},h=function(){var t=Object(n.useRef)(null),e=Object(n.useContext)(O),c=e._listProducts,a=e._listCategories,r=e._toggleProductInCart,i=e._isProductInCart,s=Object(n.useState)(null),u=Object(o.a)(s,2),d=u[0],l=u[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{ref:t,style:{textAlign:"center"},children:d?d.CategoryName:"JShop"}),Object(b.jsxs)("div",{style:{margin:"auto",padding:"1em",width:"100%",maxWidth:"100%",display:"flex",gap:"1em"},children:[Object(b.jsx)("div",{className:"categories",children:a.map((function(e,c){return Object(b.jsx)("button",{style:{background:d&&d.Uid===e.Uid?"#FEC2DD":void 0},className:"flat",onClick:function(){l(d===e?null:e),t.current.scrollIntoView()},children:e.CategoryName},c)}))}),Object(b.jsx)("div",{style:{flexGrow:1},children:Object(b.jsx)("div",{className:"grid gridLoading",children:c.filter((function(t){return!d||t.CategoryUid===d.Uid})).map((function(t,e){return t.Uid?Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("img",{src:"https://cdn.mego.ge/4860009810194.jpg",alt:"product image"}),Object(b.jsx)("p",{children:t.ProductName}),Object(b.jsxs)("p",{style:{color:!t.isLoading&&i(t)?"#17ab23":void 0},children:[t.Price.toFixed(2),"\u20be"]}),Object(b.jsx)("button",{className:"flat ".concat(t.isLoading?"loading":""," ").concat(!t.isLoading&&i(t)?"green":""),onClick:function(){return function(t){r(t)}(t)},children:i(t)?"\u10d3\u10d0\u10d1\u10e0\u10e3\u10dc\u10d4\u10d1\u10d0":"\u10d0\u10e6\u10d4\u10d1\u10d0"})]},t.Uid):Object(b.jsxs)("div",{className:"card cardLoading",children:[Object(b.jsx)("div",{}),Object(b.jsx)("p",{}),Object(b.jsx)("p",{}),Object(b.jsx)("button",{className:"flat"})]},e)}))})})]})]})};var g=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(h,{}),Object(b.jsx)(m,{})]})},x=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,47)).then((function(e){var c=e.getCLS,n=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;c(t),n(t),a(t),r(t),i(t)}))};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(f,{children:Object(b.jsx)(g,{})})}),document.getElementById("root")),x()}},[[46,1,2]]]);