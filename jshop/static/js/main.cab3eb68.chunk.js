(this.webpackJsonpjshop=this.webpackJsonpjshop||[]).push([[0],{25:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),r=n(19),a=n.n(r),s=(n(25),n(2)),o=n(3),d=n(5),u=n.n(d),l=n(20),j=n(0),b=Object(c.createContext)({}),f=function(e){var t=Object(c.useState)({Payment:0,PaymentNoDiscount:0,RealPayment:0,OrderDate:"",Description:"",OrderN:""}),n=Object(o.a)(t,2),i=n[0],r=n[1],a=Object(c.useState)([]),d=Object(o.a)(a,2),f=d[0],O=d[1],h=Object(c.useState)([]),m=Object(o.a)(h,2),g=m[0],x=m[1],p=Object(c.useState)([]),v=Object(o.a)(p,2),U=v[0],P=v[1];Object(c.useEffect)((function(){u.a.get("".concat("","/api/products")).then((function(e){return O(e.data)})),u.a.get("".concat("","/api/categories")).then((function(e){return P(e.data.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{CategoryName:e.CategoryName.replace("(...)","\u10e7\u10d5\u10d4\u10da\u10d0")})})))}))}),[]),Object(c.useEffect)((function(){var e=0;g.forEach((function(t){return e+=t.LinePrice})),r((function(t){return Object(s.a)(Object(s.a)({},t),{},{Payment:e,PaymentNoDiscount:e})}))}),[g]);var C=function(e,t){x((function(n){return[].concat(Object(l.a)(n),[{OrderQty:t,LinePrice:t*e.Price,LinePriceNoDiscount:t*e.Price,ProductUid:e.Uid,ProductName:e.ProductName,ProductCode:e.ProductCode,mainImage:e.mainImage,UnitPrice:e.Price,availableQty:e.Stock}])}))},y=function(e){return g.find((function(t){return t.ProductUid===e.Uid}))};return Object(j.jsx)(b.Provider,{value:{_orderHeader:i,_listProducts:f,_listDetails:g,_listCategories:U,_addProductInCart:C,_setProductQtyInCart:function(e,t){isNaN(t)||(t||x((function(t){return t.filter((function(t){return t.ProductUid!==e.ProductUid}))})),t=Math.max(Math.min(e.availableQty,t),Math.min(e.availableQty,1)),x((function(n){return n.map((function(n){return n.ProductUid===e.ProductUid?Object(s.a)(Object(s.a)({},n),{},{OrderQty:t,LinePrice:t*n.UnitPrice,LinePriceNoDiscount:t*n.UnitPrice}):n}))})))},_toggleProductInCart:function(e){O((function(t){return t.map((function(t){return t.Uid===e.Uid?Object(s.a)(Object(s.a)({},t),{},{isLoading:!0}):t}))})),u.a.get("https://jsonplaceholder.typicode.com/users").then((function(){y(e)?x((function(t){return t.filter((function(t){return t.ProductUid!==e.Uid}))})):C(e,1),O((function(t){return t.map((function(t){return t.Uid===e.Uid?Object(s.a)(Object(s.a)({},t),{},{isLoading:!1}):t}))}))})).catch((function(e){return console.log(e)}))},_isProductInCart:y,_clearCart:function(){return x([])}},children:e.children})},O=function(){var e=Object(c.useContext)(b),t=e._orderHeader,n=e._clearCart,i=e._listDetails,r=e._setProductQtyInCart,a=Object(c.useState)(!1),d=Object(o.a)(a,2),l=d[0],f=d[1],O=Object(c.useState)(0),h=Object(o.a)(O,2),m=h[0],g=h[1],x=Object(c.useState)({isLoading:!1,number:localStorage.getItem("number")||"",address:localStorage.getItem("address")||"",isSoldSuccessfully:!1}),p=Object(o.a)(x,2),v=p[0],U=p[1];Object(c.useEffect)((function(){l||g(0)}),[l]);var P=function(){n(),f(!1),g(0),U(Object(s.a)(Object(s.a)({},v),{},{isSoldSuccessfully:!1}))},C=function(e){e.preventDefault(),v.isSoldSuccessfully?P():g(1-m)};return i.length?Object(j.jsxs)("div",{className:"cartInfo anFadeIn",children:[l&&Object(j.jsx)("div",{onClick:function(){v.isSoldSuccessfully?P():f(!1)},className:"cartInfoCover"}),l&&Object(j.jsxs)("div",{className:"cartInfoContainer",children:[Object(j.jsxs)("div",{className:"cartInfoHeader",children:[Object(j.jsx)("h2",{children:"\u10d9\u10d0\u10da\u10d0\u10d7\u10d0"}),Object(j.jsx)("button",{className:"".concat(1===m?"flat":""),onClick:C,children:0===m?"\u10e8\u10d4\u10eb\u10d4\u10dc\u10d0":"\u2716"})]}),0===m?i.map((function(e){return Object(j.jsxs)("div",{className:"detail",children:[Object(j.jsx)("button",{className:"flat",onClick:function(){r(e,0),1===i.length&&f(!1)},children:"\u2716"}),Object(j.jsx)("img",{alt:"product",src:e.mainImage?"/"+e.mainImage:"https://cdn.mego.ge/4860009810194.jpg"}),Object(j.jsx)("p",{children:e.ProductName}),Object(j.jsx)("button",{className:"flat",onClick:function(){return r(e,Math.max(1,e.OrderQty-1))},children:"-"}),Object(j.jsx)("input",{type:"text",value:e.OrderQty,onChange:function(t){return r(e,Math.max(1,parseFloat(t.target.value)))}}),Object(j.jsx)("button",{className:"flat",onClick:function(){return r(e,e.OrderQty+1)},children:"+"})]},e.ProductUid)})):v.isSoldSuccessfully?Object(j.jsxs)("div",{style:{marginTop:"7em",textAlign:"center"},children:[Object(j.jsxs)("h1",{children:["\u10d7\u10e5\u10d5\u10d4\u10dc\u10d8 \u10e8\u10d4\u10d9\u10d5\u10d4\u10d7\u10d0 \u10db\u10d8\u10e6\u10d4\u10d1\u10e3\u10da\u10d8\u10d0 \ud83e\udd70 ",Object(j.jsx)("span",{style:{color:"#17AB23"},children:"\u10d3\u10d0\u10d4\u10da\u10dd\u10d3\u10d4\u10d7 \u10d6\u10d0\u10e0\u10e1"})]}),Object(j.jsx)("button",{onClick:C,children:"\u10d2\u10d0\u10e1\u10d0\u10d2\u10d4\u10d1\u10d8\u10d0 \ud83e\udd17"})]}):Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),v.isLoading||(U(Object(s.a)(Object(s.a)({},v),{},{isLoading:!0})),u.a.post("".concat("","/api/createSellInvoice"),{header:t,detail_list:i,payment:{Value:0,Description:""},customer:{Id:"999",Name:"jax",ShippingAdress:v.address,Email:"",Phone:v.number}}).then((function(e){"ERROR"===e.data.status&&alert(e.data.error_message);var t="OK"===e.data.status;U(Object(s.a)(Object(s.a)({},v),{},{isLoading:!1,isSoldSuccessfully:t})),t&&(localStorage.setItem("number",v.number),localStorage.setItem("address",v.address))})).catch((function(e){return console.log(e)})))},children:[Object(j.jsxs)("label",{className:"input",children:["\u10e2\u10d4\u10da\u10d4\u10e4\u10dd\u10dc\u10d8\u10e1 \u10dc\u10dd\u10db\u10d4\u10e0\u10d8",Object(j.jsx)("input",{name:"phone",type:"tel",value:v.number,onChange:function(e){return U(Object(s.a)(Object(s.a)({},v),{},{number:e.target.value}))}})]}),Object(j.jsxs)("label",{className:"input",children:["\u10db\u10d8\u10e1\u10d0\u10db\u10d0\u10e0\u10d7\u10d8",Object(j.jsx)("input",{name:"address",type:"text",value:v.address,onChange:function(e){return U(Object(s.a)(Object(s.a)({},v),{},{address:e.target.value}))}})]}),Object(j.jsx)("button",{className:"".concat(v.isLoading?"loading":""),children:"\u10e8\u10d4\u10d9\u10d5\u10d4\u10d7\u10d0"})]})})]}),Object(j.jsxs)("button",{style:{background:l?"#FCCEE5":void 0,color:l?"#FF6D99":void 0},onClick:function(){v.isSoldSuccessfully?P():f(!l)},children:[t.Payment.toFixed(2),"\u20be"]})]}):Object(j.jsx)(j.Fragment,{})},h=function(e){var t=e.product,n=e.isLoading,i=Object(c.useContext)(b),r=i._toggleProductInCart,a=i._isProductInCart;return n?Object(j.jsxs)("div",{className:"card cardLoading",children:[Object(j.jsx)("div",{}),Object(j.jsx)("p",{}),Object(j.jsx)("p",{}),Object(j.jsx)("button",{className:"flat"})]}):Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("img",{alt:"product",src:t.mainImage?"/"+t.mainImage:"https://cdn.mego.ge/4860009810194.jpg"}),Object(j.jsx)("p",{children:t.ProductName}),Object(j.jsxs)("p",{style:{color:!t.isLoading&&a(t)?"#17ab23":void 0},children:[t.Price.toFixed(2),"\u20be"]}),Object(j.jsx)("button",{className:"flat ".concat(t.isLoading?"loading":""," ").concat(!t.isLoading&&a(t)?"green":""),onClick:function(){return function(e){r(e)}(t)},children:a(t)?"\u10d3\u10d0\u10d1\u10e0\u10e3\u10dc\u10d4\u10d1\u10d0":"\u10d0\u10e6\u10d4\u10d1\u10d0"})]},t.Uid)},m=function(){var e=Object(c.useContext)(b),t=e._listProducts,n=e._listCategories,i=Object(c.useRef)(null),r=Object(c.useState)([{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]),a=Object(o.a)(r,2),s=a[0],d=a[1],u=Object(c.useState)([]),l=Object(o.a)(u,2),f=l[0],O=l[1],m=Object(c.useState)([]),g=Object(o.a)(m,2),x=g[0],p=g[1],v=Object(c.useState)({Uid:1}),U=Object(o.a)(v,2),P=U[0],C=U[1],y=Object(c.useState)(!0),S=Object(o.a)(y,2),N=S[0],I=S[1],L=Object(c.useState)([{Uid:-1},{Uid:-2},{Uid:-3},{Uid:-4},{Uid:-5},{Uid:-6},{Uid:-7},{Uid:-8},{Uid:-9},{Uid:-10},{Uid:-11},{Uid:-12},{Uid:-13},{Uid:-14},{Uid:-15},{Uid:-16},{Uid:-17},{Uid:-18},{Uid:-19},{Uid:-20}]),_=Object(o.a)(L,1)[0],k=function e(t,c){return c&&c.ParentUid?(t.unshift(c),e(t,n.find((function(e){return e.Uid===c.ParentUid}))),t):t},E=function(){var e=[];return e=k(e,P)},D=function e(t,c){return c&&c.ParentUid?(t.unshift(c.Uid),n.filter((function(e){return e.ParentUid===c.Uid})).forEach((function(n){return e(t,n)})),t):t},w=function(){var e=[];return e=D(e,P)};Object(c.useEffect)((function(){var e=n.filter((function(e){return e.ParentUid===P.Uid}));d(e.length?e:n.filter((function(e){return e.ParentUid===P.ParentUid}))),p(E()),O(w())}),[P,n]),Object(c.useEffect)((function(){t.length&&n.length&&N&&(I(!1),C(n.find((function(e){return 1===e.Uid}))))}),[t,n]);var F=Object(c.useState)(!1),Q=Object(o.a)(F,2),R=Q[0],M=Q[1],H=Object(c.useState)(""),A=Object(o.a)(H,2),B=A[0],J=A[1];return Object(c.useEffect)((function(){R?i.current.focus():(i.current.blur(),J(""))}),[R]),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:".5em"},children:[Object(j.jsx)("h2",{className:"logo",style:{pointerEvents:N?"none":void 0},onClick:function(){return C(n.find((function(e){return 1===e.Uid})))},children:"JxShop"}),Object(j.jsx)("label",{className:"input search ".concat(R&&"opened"),children:Object(j.jsx)("input",{value:B,onChange:function(e){J(e.target.value),C(n.find((function(e){return 1===e.Uid})))},ref:i,name:"jxshopSearch",type:"text",placeholder:""})}),Object(j.jsx)("button",{onClick:function(){return M((function(e){return!e}))},className:"flat",style:{pointerEvents:N?"none":void 0,marginRight:26,minWidth:150,minHeight:56,width:150,height:56,padding:0},children:N?"":R?"\u2716 \u10d3\u10d0\u10ee\u10e3\u10e0\u10d5\u10d0":"\ud83d\udd0e \u10eb\u10d4\u10d1\u10dc\u10d0"})]}),Object(j.jsxs)("div",{style:{margin:"auto",padding:"1em",width:"100%",maxWidth:"100%",display:"flex",gap:"1em"},children:[Object(j.jsx)("div",{className:"categories",children:(N?[{},{},{},{},{},{},{},{},{},{},{},{}]:s).map((function(e,t){return Object(j.jsx)("button",{style:{pointerEvents:N?"none":void 0,background:P&&P.Uid===e.Uid?"#FEC2DD":void 0},className:"flat",onClick:function(){C(e),window.scroll(0,0)},children:e.CategoryName},t)}))}),Object(j.jsxs)("div",{style:{flexGrow:1},children:[Object(j.jsxs)("div",{className:"breadcrumb",children:[(N||!f.length)&&Object(j.jsx)("div",{style:{background:"#ff3a8f10",borderRadius:"18px 8px",width:60},children:"\u200e"}),x.map((function(e,t){return Object(j.jsxs)("span",{children:[Object(j.jsx)("button",{onClick:function(){return C(e)},children:e.CategoryName})," ",t!==x.length-1&&" \\ "]},e.Uid)}))]}),Object(j.jsxs)("div",{className:"grid gridLoading",children:[!N&&f.length>0&&!t.filter((function(e){return!P||f.includes(e.CategoryUid)&&e.ProductName.toLowerCase().includes(B.toLocaleLowerCase())})).length&&Object(j.jsx)("h2",{style:{whiteSpace:"nowrap"},children:"404: \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d4\u10d1\u10d8 \u10d0\u10e0\u10db\u10dd\u10d8\u10eb\u10d4\u10d1\u10dc\u10d0"}),(N||!f.length?_:t.filter((function(e){return!P||f.includes(e.CategoryUid)&&e.ProductName.toLowerCase().includes(B.toLocaleLowerCase())}))).map((function(e,t){return Object(j.jsx)(h,{isLoading:e.Uid<0,product:e},e.Uid)}))]})]})]})]})};var g=function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)(m,{}),Object(j.jsx)(O,{})]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(f,{children:Object(j.jsx)(g,{})})}),document.getElementById("root")),x()}},[[45,1,2]]]);