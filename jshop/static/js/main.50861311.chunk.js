(this.webpackJsonpjshop=this.webpackJsonpjshop||[]).push([[0],{25:function(t,e,n){},45:function(t,e,n){"use strict";n.r(e);var c=n(1),i=n.n(c),r=n(19),a=n.n(r),o=(n(25),n(2)),s=n(3),u=n(5),d=n.n(u),l=n(20),j="http://localhost:5000",b=n(0),f=Object(c.createContext)({}),O=function(t){var e=Object(c.useState)({Payment:0,PaymentNoDiscount:0,RealPayment:0,OrderDate:"",Description:"",OrderN:""}),n=Object(s.a)(e,2),i=n[0],r=n[1],a=Object(c.useState)([]),u=Object(s.a)(a,2),O=u[0],h=u[1],m=Object(c.useState)([]),g=Object(s.a)(m,2),x=g[0],p=g[1],v=Object(c.useState)([]),U=Object(s.a)(v,2),P=U[0],y=U[1];Object(c.useEffect)((function(){d.a.get("".concat(j,"/api/products")).then((function(t){return h(t.data)})),d.a.get("".concat(j,"/api/categories")).then((function(t){return y(t.data.map((function(t){return Object(o.a)(Object(o.a)({},t),{},{CategoryName:t.CategoryName.replace("(...)","\u10e7\u10d5\u10d4\u10da\u10d0")})})))}))}),[]),Object(c.useEffect)((function(){var t=0;x.forEach((function(e){return t+=e.LinePrice})),r((function(e){return Object(o.a)(Object(o.a)({},e),{},{Payment:t,PaymentNoDiscount:t})}))}),[x]);var C=function(t,e){p((function(n){return[].concat(Object(l.a)(n),[{OrderQty:e,LinePrice:e*t.Price,LinePriceNoDiscount:e*t.Price,ProductUid:t.Uid,ProductName:t.ProductName,ProductCode:t.ProductCode,UnitPrice:t.Price,availableQty:t.Stock}])}))},S=function(t){return x.find((function(e){return e.ProductUid===t.Uid}))};return Object(b.jsx)(f.Provider,{value:{_orderHeader:i,_listProducts:O,_listDetails:x,_listCategories:P,_addProductInCart:C,_setProductQtyInCart:function(t,e){isNaN(e)||(e||p((function(e){return e.filter((function(e){return e.ProductUid!==t.ProductUid}))})),e=Math.max(Math.min(t.availableQty,e),Math.min(t.availableQty,1)),p((function(n){return n.map((function(n){return n.ProductUid===t.ProductUid?Object(o.a)(Object(o.a)({},n),{},{OrderQty:e,LinePrice:e*n.UnitPrice,LinePriceNoDiscount:e*n.UnitPrice}):n}))})))},_toggleProductInCart:function(t){h((function(e){return e.map((function(e){return e.Uid===t.Uid?Object(o.a)(Object(o.a)({},e),{},{isLoading:!0}):e}))})),d.a.get("https://jsonplaceholder.typicode.com/users").then((function(){S(t)?p((function(e){return e.filter((function(e){return e.ProductUid!==t.Uid}))})):C(t,1),h((function(e){return e.map((function(e){return e.Uid===t.Uid?Object(o.a)(Object(o.a)({},e),{},{isLoading:!1}):e}))}))})).catch((function(t){return console.log(t)}))},_isProductInCart:S,_clearCart:function(){return p([])}},children:t.children})},h=function(){var t=Object(c.useContext)(f),e=t._orderHeader,n=t._clearCart,i=t._listDetails,r=t._setProductQtyInCart,a=Object(c.useState)(!1),u=Object(s.a)(a,2),l=u[0],O=u[1],h=Object(c.useState)(0),m=Object(s.a)(h,2),g=m[0],x=m[1],p=Object(c.useState)({isLoading:!1,number:localStorage.getItem("number")||"",address:localStorage.getItem("address")||"",isSoldSuccessfully:!1}),v=Object(s.a)(p,2),U=v[0],P=v[1];Object(c.useEffect)((function(){l||x(0)}),[l]);var y=function(){n(),O(!1),x(0),P(Object(o.a)(Object(o.a)({},U),{},{isSoldSuccessfully:!1}))},C=function(t){t.preventDefault(),U.isSoldSuccessfully?y():x(1-g)};return i.length?Object(b.jsxs)("div",{className:"cartInfo anFadeIn",children:[l&&Object(b.jsx)("div",{onClick:function(){U.isSoldSuccessfully?y():O(!1)},className:"cartInfoCover"}),l&&Object(b.jsxs)("div",{className:"cartInfoContainer",children:[Object(b.jsxs)("div",{className:"cartInfoHeader",children:[Object(b.jsx)("h2",{children:"\u10d9\u10d0\u10da\u10d0\u10d7\u10d0"}),Object(b.jsx)("button",{className:"".concat(1===g?"flat":""),onClick:C,children:0===g?"\u10e8\u10d4\u10eb\u10d4\u10dc\u10d0":"\u2716"})]}),0===g?i.map((function(t){return Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("button",{className:"flat",onClick:function(){r(t,0),1===i.length&&O(!1)},children:"\u2716"}),Object(b.jsx)("img",{alt:"product",src:"https://images.unsplash.com/photo-1562952546-12992a813a51?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1171&q=80"}),Object(b.jsx)("p",{children:t.ProductName}),Object(b.jsx)("button",{className:"flat",onClick:function(){return r(t,Math.max(1,t.OrderQty-1))},children:"-"}),Object(b.jsx)("input",{type:"text",value:t.OrderQty,onChange:function(e){return r(t,Math.max(1,parseFloat(e.target.value)))}}),Object(b.jsx)("button",{className:"flat",onClick:function(){return r(t,t.OrderQty+1)},children:"+"})]},t.ProductUid)})):U.isSoldSuccessfully?Object(b.jsxs)("div",{style:{marginTop:"7em",textAlign:"center"},children:[Object(b.jsxs)("h1",{children:["\u10d7\u10e5\u10d5\u10d4\u10dc\u10d8 \u10e8\u10d4\u10d9\u10d5\u10d4\u10d7\u10d0 \u10db\u10d8\u10e6\u10d4\u10d1\u10e3\u10da\u10d8\u10d0 \ud83e\udd70 ",Object(b.jsx)("span",{style:{color:"#17AB23"},children:"\u10d3\u10d0\u10d4\u10da\u10dd\u10d3\u10d4\u10d7 \u10d6\u10d0\u10e0\u10e1"})]}),Object(b.jsx)("button",{onClick:C,children:"\u10d2\u10d0\u10e1\u10d0\u10d2\u10d4\u10d1\u10d8\u10d0 \ud83e\udd17"})]}):Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),U.isLoading||(P(Object(o.a)(Object(o.a)({},U),{},{isLoading:!0})),d.a.post("".concat(j,"/api/createSellInvoice"),{header:e,detail_list:i,payment:{Value:0,Description:""},customer:{Id:"999",Name:"jax",ShippingAdress:U.address,Email:"",Phone:U.number}}).then((function(t){"ERROR"===t.data.status&&alert(t.data.error_message);var e="OK"===t.data.status;P(Object(o.a)(Object(o.a)({},U),{},{isLoading:!1,isSoldSuccessfully:e})),e&&(localStorage.setItem("number",U.number),localStorage.setItem("address",U.address))})).catch((function(t){return console.log(t)})))},children:[Object(b.jsxs)("label",{className:"input",children:["\u10e2\u10d4\u10da\u10d4\u10e4\u10dd\u10dc\u10d8\u10e1 \u10dc\u10dd\u10db\u10d4\u10e0\u10d8",Object(b.jsx)("input",{name:"phone",type:"tel",value:U.number,onChange:function(t){return P(Object(o.a)(Object(o.a)({},U),{},{number:t.target.value}))}})]}),Object(b.jsxs)("label",{className:"input",children:["\u10db\u10d8\u10e1\u10d0\u10db\u10d0\u10e0\u10d7\u10d8",Object(b.jsx)("input",{name:"address",type:"text",value:U.address,onChange:function(t){return P(Object(o.a)(Object(o.a)({},U),{},{address:t.target.value}))}})]}),Object(b.jsx)("button",{className:"".concat(U.isLoading?"loading":""),children:"\u10e8\u10d4\u10d9\u10d5\u10d4\u10d7\u10d0"})]})})]}),Object(b.jsxs)("button",{style:{background:l?"#FCCEE5":void 0,color:l?"#FF6D99":void 0},onClick:function(){U.isSoldSuccessfully?y():O(!l)},children:[e.Payment.toFixed(2),"\u20be"]})]}):Object(b.jsx)(b.Fragment,{})},m=function(t){var e=t.product,n=t.isLoading,i=Object(c.useContext)(f),r=i._toggleProductInCart,a=i._isProductInCart;return n?Object(b.jsxs)("div",{className:"card cardLoading",children:[Object(b.jsx)("div",{}),Object(b.jsx)("p",{}),Object(b.jsx)("p",{}),Object(b.jsx)("button",{className:"flat"})]}):Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("img",{alt:"product",src:"https://cdn.mego.ge/4860009810194.jpg"}),Object(b.jsx)("p",{children:e.ProductName}),Object(b.jsxs)("p",{style:{color:!e.isLoading&&a(e)?"#17ab23":void 0},children:[e.Price.toFixed(2),"\u20be"]}),Object(b.jsx)("button",{className:"flat ".concat(e.isLoading?"loading":""," ").concat(!e.isLoading&&a(e)?"green":""),onClick:function(){return function(t){r(t)}(e)},children:a(e)?"\u10d3\u10d0\u10d1\u10e0\u10e3\u10dc\u10d4\u10d1\u10d0":"\u10d0\u10e6\u10d4\u10d1\u10d0"})]},e.Uid)},g=function(){var t=Object(c.useContext)(f),e=t._listProducts,n=t._listCategories,i=Object(c.useRef)(null),r=Object(c.useState)([{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]),a=Object(s.a)(r,2),o=a[0],u=a[1],d=Object(c.useState)([]),l=Object(s.a)(d,2),j=l[0],O=l[1],h=Object(c.useState)([]),g=Object(s.a)(h,2),x=g[0],p=g[1],v=Object(c.useState)({Uid:1}),U=Object(s.a)(v,2),P=U[0],y=U[1],C=Object(c.useState)(!0),S=Object(s.a)(C,2),N=S[0],L=S[1],I=Object(c.useState)([{Uid:-1},{Uid:-2},{Uid:-3},{Uid:-4},{Uid:-5},{Uid:-6},{Uid:-7},{Uid:-8},{Uid:-9},{Uid:-10},{Uid:-11},{Uid:-12},{Uid:-13},{Uid:-14},{Uid:-15},{Uid:-16},{Uid:-17},{Uid:-18},{Uid:-19},{Uid:-20}]),_=Object(s.a)(I,1)[0],k=function t(e,c){return c&&c.ParentUid?(e.unshift(c),t(e,n.find((function(t){return t.Uid===c.ParentUid}))),e):e},w=function(){var t=[];return t=k(t,P)},D=function t(e,c){return c&&c.ParentUid?(e.unshift(c.Uid),n.filter((function(t){return t.ParentUid===c.Uid})).forEach((function(n){return t(e,n)})),e):e},E=function(){var t=[];return t=D(t,P)};Object(c.useEffect)((function(){var t=n.filter((function(t){return t.ParentUid===P.Uid}));u(t.length?t:n.filter((function(t){return t.ParentUid===P.ParentUid}))),p(w()),O(E())}),[P,n]),Object(c.useEffect)((function(){e.length&&n.length&&N&&(L(!1),y(n.find((function(t){return 1===t.Uid}))))}),[e,n]);var F=Object(c.useState)(!1),Q=Object(s.a)(F,2),M=Q[0],H=Q[1],R=Object(c.useState)(""),B=Object(s.a)(R,2),A=B[0],G=B[1];return Object(c.useEffect)((function(){M?i.current.focus():(i.current.blur(),G(""))}),[M]),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:".5em"},children:[Object(b.jsx)("h2",{className:"logo",style:{pointerEvents:N?"none":void 0},onClick:function(){return y(n.find((function(t){return 1===t.Uid})))},children:"JxShop"}),Object(b.jsx)("label",{className:"input search ".concat(M&&"opened"),children:Object(b.jsx)("input",{value:A,onChange:function(t){G(t.target.value),y(n.find((function(t){return 1===t.Uid})))},ref:i,name:"jxshopSearch",type:"text",placeholder:""})}),Object(b.jsx)("button",{onClick:function(){return H((function(t){return!t}))},className:"flat",style:{pointerEvents:N?"none":void 0,marginRight:26,minWidth:150,minHeight:56,width:150,height:56,padding:0},children:N?"":M?"\u2716 \u10d3\u10d0\u10ee\u10e3\u10e0\u10d5\u10d0":"\ud83d\udd0e \u10eb\u10d4\u10d1\u10dc\u10d0"})]}),Object(b.jsxs)("div",{style:{margin:"auto",padding:"1em",width:"100%",maxWidth:"100%",display:"flex",gap:"1em"},children:[Object(b.jsx)("div",{className:"categories",children:(N?[{},{},{},{},{},{},{},{},{},{},{},{}]:o).map((function(t,e){return Object(b.jsx)("button",{style:{pointerEvents:N?"none":void 0,background:P&&P.Uid===t.Uid?"#FEC2DD":void 0},className:"flat",onClick:function(){y(t),window.scroll(0,0)},children:t.CategoryName},e)}))}),Object(b.jsxs)("div",{style:{flexGrow:1},children:[Object(b.jsxs)("div",{className:"breadcrumb",children:[(N||!j.length)&&Object(b.jsx)("div",{style:{background:"#ff3a8f10",borderRadius:"18px 8px",width:60},children:"\u200e"}),x.map((function(t,e){return Object(b.jsxs)("span",{children:[Object(b.jsx)("button",{onClick:function(){return y(t)},children:t.CategoryName})," ",e!==x.length-1&&" \\ "]},t.Uid)}))]}),Object(b.jsxs)("div",{className:"grid gridLoading",children:[!N&&j.length>0&&!e.filter((function(t){return!P||j.includes(t.CategoryUid)&&t.ProductName.toLowerCase().includes(A.toLocaleLowerCase())})).length&&Object(b.jsx)("h2",{style:{whiteSpace:"nowrap"},children:"404: \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d4\u10d1\u10d8 \u10d0\u10e0\u10db\u10dd\u10d8\u10eb\u10d4\u10d1\u10dc\u10d0"}),(N||!j.length?_:e.filter((function(t){return!P||j.includes(t.CategoryUid)&&t.ProductName.toLowerCase().includes(A.toLocaleLowerCase())}))).map((function(t,e){return Object(b.jsx)(m,{isLoading:t.Uid<0,product:t},t.Uid)}))]})]})]})]})};var x=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(g,{}),Object(b.jsx)(h,{})]})},p=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),c(t),i(t),r(t),a(t)}))};a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(O,{children:Object(b.jsx)(x,{})})}),document.getElementById("root")),p()}},[[45,1,2]]]);