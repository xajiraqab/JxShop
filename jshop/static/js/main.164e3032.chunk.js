(this.webpackJsonpjshop=this.webpackJsonpjshop||[]).push([[0],{26:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var c=n(1),i=n.n(c),r=n(19),a=n.n(r),o=(n(26),n(2)),u=n(4),d=n(5),s=n.n(d),l=(n(20),n(21)),j=n(0),b=Object(c.createContext)({}),f=function(t){var e=Object(c.useState)({Value:0,Description:""}),n=Object(u.a)(e,2),i=(n[0],n[1],Object(c.useState)({Payment:0,PaymentNoDiscount:0,RealPayment:0,OrderDate:"",Description:"",OrderN:""})),r=Object(u.a)(i,2),a=r[0],d=r[1],f=Object(c.useState)([{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]),O=Object(u.a)(f,2),g=O[0],P=O[1],h=Object(c.useState)([]),m=Object(u.a)(h,2),p=m[0],x=m[1],U=Object(c.useState)([{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]),v=Object(u.a)(U,2),y=v[0],C=v[1];Object(c.useEffect)((function(){s.a.get("/api/products").then((function(t){return P(t.data)})),s.a.get("/api/categories").then((function(t){return C(t.data.filter((function(t){return t.Uid>1})))}))}),[]),Object(c.useEffect)((function(){var t=0;p.forEach((function(e){return t+=e.LinePrice})),d(Object(o.a)(Object(o.a)({},a),{},{Payment:t,PaymentNoDiscount:t}))}),[p]);var N=function(t,e){x((function(n){return[].concat(Object(l.a)(n),[{OrderQty:e,LinePrice:e*t.Price,LinePriceNoDiscount:e*t.Price,ProductUid:t.Uid,ProductName:t.ProductName,ProductCode:t.ProductCode,UnitPrice:t.Price,availableQty:t.Stock}])}))},L=function(t){return p.find((function(e){return e.ProductUid===t.Uid}))};return Object(j.jsx)(b.Provider,{value:{_orderHeader:a,_listProducts:g,_listDetails:p,_listCategories:y,_addProductInCart:N,_setProductQtyInCart:function(t,e){isNaN(e)||(e||x((function(e){return e.filter((function(e){return e.ProductUid!==t.ProductUid}))})),e=Math.max(Math.min(t.availableQty,e),Math.min(t.availableQty,1)),x((function(n){return n.map((function(n){return n.ProductUid===t.ProductUid?Object(o.a)(Object(o.a)({},n),{},{OrderQty:e,LinePrice:e*n.UnitPrice,LinePriceNoDiscount:e*n.UnitPrice}):n}))})))},_toggleProductInCart:function(t){P((function(e){return e.map((function(e){return e.Uid===t.Uid?Object(o.a)(Object(o.a)({},e),{},{isLoading:!0}):e}))})),s.a.get("https://jsonplaceholder.typicode.com/users").then((function(){L(t)?x((function(e){return e.filter((function(e){return e.ProductUid!==t.Uid}))})):N(t,1),P((function(e){return e.map((function(e){return e.Uid===t.Uid?Object(o.a)(Object(o.a)({},e),{},{isLoading:!1}):e}))}))})).catch((function(t){return console.log(t)}))},_isProductInCart:L,_clearCart:function(){return x([])}},children:t.children})},O=function(){var t=Object(c.useRef)(null),e=Object(c.useContext)(b),n=e._listProducts,i=e._listCategories,r=e._toggleProductInCart,a=e._isProductInCart,o=Object(c.useState)(null),d=Object(u.a)(o,2),s=d[0],l=d[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{ref:t,style:{textAlign:"center"},children:s?s.CategoryName:"JShop"}),Object(j.jsxs)("div",{style:{margin:"auto",padding:"1em",width:"100%",maxWidth:"100%",display:"flex",gap:"1em"},children:[Object(j.jsx)("div",{className:"categories",children:i.map((function(e,n){return Object(j.jsx)("button",{style:{background:s&&s.Uid===e.Uid?"#FEC2DD":void 0},className:"flat",onClick:function(){l(s===e?null:e),t.current.scrollIntoView()},children:e.CategoryName},n)}))}),Object(j.jsx)("div",{style:{flexGrow:1},children:Object(j.jsx)("div",{className:"grid gridLoading",children:n.filter((function(t){return!s||t.CategoryUid===s.Uid})).map((function(t,e){return t.Uid?Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("img",{src:"https://cdn.mego.ge/4860009810194.jpg",alt:"product image"}),Object(j.jsx)("p",{children:t.ProductName}),Object(j.jsxs)("p",{style:{color:!t.isLoading&&a(t)?"#17ab23":void 0},children:[t.Price.toFixed(2),"\u20be"]}),Object(j.jsx)("button",{className:"flat ".concat(t.isLoading?"loading":""," ").concat(!t.isLoading&&a(t)?"green":""),onClick:function(){return function(t){r(t)}(t)},children:a(t)?"\u10d3\u10d0\u10d1\u10e0\u10e3\u10dc\u10d4\u10d1\u10d0":"\u10d0\u10e6\u10d4\u10d1\u10d0"})]},t.Uid):Object(j.jsxs)("div",{className:"card cardLoading",children:[Object(j.jsx)("div",{}),Object(j.jsx)("p",{}),Object(j.jsx)("p",{}),Object(j.jsx)("button",{className:"flat"})]},e)}))})})]})]})};var g=function(){return Object(j.jsxs)("div",{children:["test",Object(j.jsx)(O,{})]})},P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(e){var n=e.getCLS,c=e.getFID,i=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),c(t),i(t),r(t),a(t)}))};a.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(f,{children:Object(j.jsx)(g,{})})}),document.getElementById("root")),P()}},[[46,1,2]]]);