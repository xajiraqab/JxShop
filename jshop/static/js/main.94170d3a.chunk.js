(this.webpackJsonpjshop=this.webpackJsonpjshop||[]).push([[0],{26:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var c=n(1),r=n.n(c),a=n(19),i=n.n(a),s=(n(26),n(2)),o=n(4),u=n(9),d=n.n(u),l=n(20),j=n(21),b=n(0),f=Object(c.createContext)({}),O=function(t){var e=Object(c.useState)({Value:0,Description:""}),n=Object(o.a)(e,2),r=(n[0],n[1],Object(c.useState)({Payment:0,PaymentNoDiscount:0,RealPayment:0,OrderDate:"",Description:"",OrderN:""})),a=Object(o.a)(r,2),i=a[0],u=a[1],l=Object(c.useState)([{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]),O=Object(o.a)(l,2),h=O[0],m=O[1],x=Object(c.useState)([]),g=Object(o.a)(x,2),p=g[0],P=g[1],v=Object(c.useState)([{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]),y=Object(o.a)(v,2),C=y[0],S=y[1];Object(c.useEffect)((function(){fetch("/api/products").then((function(t){return t.json()})).then((function(t){return m(t)})),fetch("/api/categories").then((function(t){return t.json()})).then((function(t){return S(t.filter((function(t){return t.Uid>1})))}))}),[]),Object(c.useEffect)((function(){var t=0;p.forEach((function(e){return t+=e.LinePrice})),u(Object(s.a)(Object(s.a)({},i),{},{Payment:t,PaymentNoDiscount:t}))}),[p]);var N=function(t,e){P((function(n){return[].concat(Object(j.a)(n),[{OrderQty:e,LinePrice:e*t.Price,LinePriceNoDiscount:e*t.Price,ProductUid:t.Uid,ProductName:t.ProductName,ProductCode:t.ProductCode,UnitPrice:t.Price,availableQty:t.Stock}])}))},U=function(t){return p.find((function(e){return e.ProductUid===t.Uid}))};return Object(b.jsx)(f.Provider,{value:{_orderHeader:i,_listProducts:h,_listDetails:p,_listCategories:C,_addProductInCart:N,_setProductQtyInCart:function(t,e){isNaN(e)||(e||P((function(e){return e.filter((function(e){return e.ProductUid!==t.ProductUid}))})),e=Math.max(Math.min(t.availableQty,e),Math.min(t.availableQty,1)),P((function(n){return n.map((function(n){return n.ProductUid===t.ProductUid?Object(s.a)(Object(s.a)({},n),{},{OrderQty:e,LinePrice:e*n.UnitPrice,LinePriceNoDiscount:e*n.UnitPrice}):n}))})))},_toggleProductInCart:function(t){m((function(e){return e.map((function(e){return e.Uid===t.Uid?Object(s.a)(Object(s.a)({},e),{},{isLoading:!0}):e}))})),d.a.get("https://jsonplaceholder.typicode.com/users").then((function(){U(t)?P((function(e){return e.filter((function(e){return e.ProductUid!==t.Uid}))})):N(t,1),m((function(e){return e.map((function(e){return e.Uid===t.Uid?Object(s.a)(Object(s.a)({},e),{},{isLoading:!1}):e}))}))})).catch((function(t){return console.log(t)}))},_isProductInCart:U,_clearCart:function(){return P([])}},children:t.children})},h=function(){var t=Object(c.useContext)(f),e=t._orderHeader,n=t._clearCart,r=t._listDetails,a=t._setProductQtyInCart,i=Object(c.useState)(!1),u=Object(o.a)(i,2),j=u[0],O=u[1],h=Object(c.useState)(0),m=Object(o.a)(h,2),x=m[0],g=m[1],p=Object(c.useState)({isLoading:!1,number:localStorage.getItem("number")||"",address:localStorage.getItem("address")||"",isSoldSuccessfully:!1}),P=Object(o.a)(p,2),v=P[0],y=P[1];Object(l.useEffect)((function(){j||g(0)}),[j]);var C=function(){n(),O(!1),g(0),y(Object(s.a)(Object(s.a)({},v),{},{isSoldSuccessfully:!1}))},S=function(t){t.preventDefault(),v.isSoldSuccessfully?C():g(1-x)};return r.length?Object(b.jsxs)("div",{className:"cartInfo anFadeIn",children:[j&&Object(b.jsx)("div",{onClick:function(){v.isSoldSuccessfully?C():O(!1)},className:"cartInfoCover"}),j&&Object(b.jsxs)("div",{className:"cartInfoContainer",children:[Object(b.jsxs)("div",{className:"cartInfoHeader",children:[Object(b.jsx)("h2",{children:"\u10d9\u10d0\u10da\u10d0\u10d7\u10d0"}),Object(b.jsx)("button",{className:"".concat(1===x?"flat":""),onClick:S,children:0===x?"\u10e8\u10d4\u10eb\u10d4\u10dc\u10d0":"\u2716"})]}),0===x?r.map((function(t){return Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("button",{className:"flat",onClick:function(){a(t,0),1===r.length&&O(!1)},children:"\u2716"}),Object(b.jsx)("img",{src:"https://images.unsplash.com/photo-1562952546-12992a813a51?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1171&q=80"}),Object(b.jsx)("p",{children:t.ProductName}),Object(b.jsx)("button",{className:"flat",onClick:function(){return a(t,Math.max(1,t.OrderQty-1))},children:"-"}),Object(b.jsx)("input",{type:"text",value:t.OrderQty,onChange:function(e){return a(t,Math.max(1,parseFloat(e.target.value)))}}),Object(b.jsx)("button",{className:"flat",onClick:function(){return a(t,t.OrderQty+1)},children:"+"})]},t.ProductUid)})):v.isSoldSuccessfully?Object(b.jsxs)("div",{style:{marginTop:"7em",textAlign:"center"},children:[Object(b.jsxs)("h1",{children:["\u10d7\u10e5\u10d5\u10d4\u10dc\u10d8 \u10e8\u10d4\u10d9\u10d5\u10d4\u10d7\u10d0 \u10db\u10d8\u10e6\u10d4\u10d1\u10e3\u10da\u10d8\u10d0 \ud83e\udd70 ",Object(b.jsx)("span",{style:{color:"#17AB23"},children:"\u10d3\u10d0\u10d4\u10da\u10dd\u10d3\u10d4\u10d7 \u10d6\u10d0\u10e0\u10e1"})]}),Object(b.jsx)("button",{onClick:S,children:"\u10d2\u10d0\u10e1\u10d0\u10d2\u10d4\u10d1\u10d8\u10d0 \ud83e\udd17"})]}):Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),v.isLoading||(y(Object(s.a)(Object(s.a)({},v),{},{isLoading:!0})),d.a.post("/api/createSellInvoice",{header:e,detail_list:r,payment:{Value:0,Description:""},customer:{Id:"999",Name:"jax",ShippingAdress:v.address,Email:"",Phone:v.number}}).then((function(t){"ERROR"===t.data.status&&alert(t.data.error_message);var e="OK"===t.data.status;y(Object(s.a)(Object(s.a)({},v),{},{isLoading:!1,isSoldSuccessfully:e})),e&&(localStorage.setItem("number",v.number),localStorage.setItem("address",v.address))})).catch((function(t){return console.log(t)})))},children:[Object(b.jsxs)("label",{className:"input",children:["\u10e2\u10d4\u10da\u10d4\u10e4\u10dd\u10dc\u10d8\u10e1 \u10dc\u10dd\u10db\u10d4\u10e0\u10d8",Object(b.jsx)("input",{name:"phone",type:"tel",value:v.number,onChange:function(t){return y(Object(s.a)(Object(s.a)({},v),{},{number:t.target.value}))}})]}),Object(b.jsxs)("label",{className:"input",children:["\u10db\u10d8\u10e1\u10d0\u10db\u10d0\u10e0\u10d7\u10d8",Object(b.jsx)("input",{name:"address",type:"text",value:v.address,onChange:function(t){return y(Object(s.a)(Object(s.a)({},v),{},{address:t.target.value}))}})]}),Object(b.jsx)("button",{className:"".concat(v.isLoading?"loading":""),children:"\u10e8\u10d4\u10d9\u10d5\u10d4\u10d7\u10d0"})]})})]}),Object(b.jsxs)("button",{style:{background:j?"#FCCEE5":void 0,color:j?"#FF6D99":void 0},onClick:function(){v.isSoldSuccessfully?C():O(!j)},children:[e.Payment.toFixed(2),"\u20be"]})]}):Object(b.jsx)(b.Fragment,{})},m=function(){var t=Object(c.useRef)(null),e=Object(c.useContext)(f),n=e._listProducts,r=e._listCategories,a=e._toggleProductInCart,i=e._isProductInCart,s=Object(c.useState)(null),u=Object(o.a)(s,2),d=u[0],l=u[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{ref:t,style:{textAlign:"center"},children:d?d.CategoryName:"JShop"}),Object(b.jsxs)("div",{style:{margin:"auto",padding:"1em",width:"100%",maxWidth:"100%",display:"flex",gap:"1em"},children:[Object(b.jsx)("div",{className:"categories",children:r.map((function(e,n){return Object(b.jsx)("button",{style:{background:d&&d.Uid===e.Uid?"#FEC2DD":void 0},className:"flat",onClick:function(){l(d===e?null:e),t.current.scrollIntoView()},children:e.CategoryName},n)}))}),Object(b.jsx)("div",{style:{flexGrow:1},children:Object(b.jsx)("div",{className:"grid gridLoading",children:n.filter((function(t){return!d||t.CategoryUid===d.Uid})).map((function(t,e){return t.Uid?Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("img",{src:"https://cdn.mego.ge/4860009810194.jpg",alt:"product image"}),Object(b.jsx)("p",{children:t.ProductName}),Object(b.jsxs)("p",{style:{color:!t.isLoading&&i(t)?"#17ab23":void 0},children:[t.Price.toFixed(2),"\u20be"]}),Object(b.jsx)("button",{className:"flat ".concat(t.isLoading?"loading":""," ").concat(!t.isLoading&&i(t)?"green":""),onClick:function(){return function(t){a(t)}(t)},children:i(t)?"\u10d3\u10d0\u10d1\u10e0\u10e3\u10dc\u10d4\u10d1\u10d0":"\u10d0\u10e6\u10d4\u10d1\u10d0"})]},t.Uid):Object(b.jsxs)("div",{className:"card cardLoading",children:[Object(b.jsx)("div",{}),Object(b.jsx)("p",{}),Object(b.jsx)("p",{}),Object(b.jsx)("button",{className:"flat"})]},e)}))})})]})]})};var x=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(m,{}),Object(b.jsx)(h,{})]})},g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),c(t),r(t),a(t),i(t)}))};i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(O,{children:Object(b.jsx)(x,{})})}),document.getElementById("root")),g()}},[[46,1,2]]]);