(this.webpackJsonpjshop=this.webpackJsonpjshop||[]).push([[0],{25:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),a=n(19),r=n.n(a),o=(n(25),n(2)),s=n(3),d=n(5),u=n.n(d),l=n(20),j="http://localhost:5000",b=n(0),f=Object(c.createContext)({}),O=function(e){var t=Object(c.useState)({Payment:0,PaymentNoDiscount:0,RealPayment:0,OrderDate:"",Description:"",OrderN:""}),n=Object(s.a)(t,2),i=n[0],a=n[1],r=Object(c.useState)([]),d=Object(s.a)(r,2),O=d[0],h=d[1],m=Object(c.useState)([]),g=Object(s.a)(m,2),x=g[0],p=g[1],v=Object(c.useState)([]),U=Object(s.a)(v,2),P=U[0],C=U[1];Object(c.useEffect)((function(){u.a.get("".concat(j,"/api/products")).then((function(e){return h(e.data)})),u.a.get("".concat(j,"/api/categories")).then((function(e){return C(e.data.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{CategoryName:e.CategoryName.replace("(...)","\u10e7\u10d5\u10d4\u10da\u10d0")})})))}))}),[]),Object(c.useEffect)((function(){var e=0;x.forEach((function(t){return e+=t.LinePrice})),a((function(t){return Object(o.a)(Object(o.a)({},t),{},{Payment:e,PaymentNoDiscount:e})}))}),[x]);var y=function(e,t){p((function(n){return[].concat(Object(l.a)(n),[{OrderQty:t,LinePrice:t*e.Price,LinePriceNoDiscount:t*e.Price,ProductUid:e.Uid,ProductName:e.ProductName,ProductCode:e.ProductCode,mainImage:e.mainImage,UnitPrice:e.Price,availableQty:e.Stock}])}))},S=function(e){return x.find((function(t){return t.ProductUid===e.Uid}))};return Object(b.jsx)(f.Provider,{value:{_orderHeader:i,_listProducts:O,_listDetails:x,_listCategories:P,_addProductInCart:y,_setProductQtyInCart:function(e,t){isNaN(t)||(t||p((function(t){return t.filter((function(t){return t.ProductUid!==e.ProductUid}))})),t=Math.max(Math.min(e.availableQty,t),Math.min(e.availableQty,1)),p((function(n){return n.map((function(n){return n.ProductUid===e.ProductUid?Object(o.a)(Object(o.a)({},n),{},{OrderQty:t,LinePrice:t*n.UnitPrice,LinePriceNoDiscount:t*n.UnitPrice}):n}))})))},_toggleProductInCart:function(e){h((function(t){return t.map((function(t){return t.Uid===e.Uid?Object(o.a)(Object(o.a)({},t),{},{isLoading:!0}):t}))})),u.a.get("https://jsonplaceholder.typicode.com/users").then((function(){S(e)?p((function(t){return t.filter((function(t){return t.ProductUid!==e.Uid}))})):y(e,1),h((function(t){return t.map((function(t){return t.Uid===e.Uid?Object(o.a)(Object(o.a)({},t),{},{isLoading:!1}):t}))}))})).catch((function(e){return console.log(e)}))},_isProductInCart:S,_clearCart:function(){return p([])}},children:e.children})},h=function(){var e=Object(c.useContext)(f),t=e._orderHeader,n=e._clearCart,i=e._listDetails,a=e._setProductQtyInCart,r=Object(c.useState)(!1),d=Object(s.a)(r,2),l=d[0],O=d[1],h=Object(c.useState)(0),m=Object(s.a)(h,2),g=m[0],x=m[1],p=Object(c.useState)({isLoading:!1,number:localStorage.getItem("number")||"",address:localStorage.getItem("address")||"",isSoldSuccessfully:!1}),v=Object(s.a)(p,2),U=v[0],P=v[1];Object(c.useEffect)((function(){l||x(0)}),[l]);var C=function(){n(),O(!1),x(0),P(Object(o.a)(Object(o.a)({},U),{},{isSoldSuccessfully:!1}))},y=function(e){e.preventDefault(),U.isSoldSuccessfully?C():x(1-g)};return i.length?Object(b.jsxs)("div",{className:"cartInfo anFadeIn",children:[l&&Object(b.jsx)("div",{onClick:function(){U.isSoldSuccessfully?C():O(!1)},className:"cartInfoCover"}),l&&Object(b.jsxs)("div",{className:"cartInfoContainer",children:[Object(b.jsxs)("div",{className:"cartInfoHeader",children:[Object(b.jsx)("h2",{children:"\u10d9\u10d0\u10da\u10d0\u10d7\u10d0"}),Object(b.jsx)("button",{className:"".concat(1===g?"flat":""),onClick:y,children:0===g?"\u10e8\u10d4\u10eb\u10d4\u10dc\u10d0":"\u2716"})]}),0===g?i.map((function(e){return Object(b.jsxs)("div",{className:"detail",children:[Object(b.jsx)("button",{className:"flat",onClick:function(){a(e,0),1===i.length&&O(!1)},children:"\u2716"}),Object(b.jsx)("img",{alt:"product",src:e.mainImage?j+"/"+e.mainImage:"https://cdn.mego.ge/4860009810194.jpg"}),Object(b.jsx)("p",{children:e.ProductName}),Object(b.jsx)("button",{className:"flat",onClick:function(){return a(e,Math.max(1,e.OrderQty-1))},children:"-"}),Object(b.jsx)("input",{type:"text",value:e.OrderQty,onChange:function(t){return a(e,Math.max(1,parseFloat(t.target.value)))}}),Object(b.jsx)("button",{className:"flat",onClick:function(){return a(e,e.OrderQty+1)},children:"+"})]},e.ProductUid)})):U.isSoldSuccessfully?Object(b.jsxs)("div",{style:{marginTop:"7em",textAlign:"center"},children:[Object(b.jsxs)("h1",{children:["\u10d7\u10e5\u10d5\u10d4\u10dc\u10d8 \u10e8\u10d4\u10d9\u10d5\u10d4\u10d7\u10d0 \u10db\u10d8\u10e6\u10d4\u10d1\u10e3\u10da\u10d8\u10d0 \ud83e\udd70 ",Object(b.jsx)("span",{style:{color:"#17AB23"},children:"\u10d3\u10d0\u10d4\u10da\u10dd\u10d3\u10d4\u10d7 \u10d6\u10d0\u10e0\u10e1"})]}),Object(b.jsx)("button",{onClick:y,children:"\u10d2\u10d0\u10e1\u10d0\u10d2\u10d4\u10d1\u10d8\u10d0 \ud83e\udd17"})]}):Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),U.isLoading||(P(Object(o.a)(Object(o.a)({},U),{},{isLoading:!0})),u.a.post("".concat(j,"/api/createSellInvoice"),{header:t,detail_list:i,payment:{Value:0,Description:""},customer:{Id:"999",Name:"jax",ShippingAdress:U.address,Email:"",Phone:U.number}}).then((function(e){"ERROR"===e.data.status&&alert(e.data.error_message);var t="OK"===e.data.status;P(Object(o.a)(Object(o.a)({},U),{},{isLoading:!1,isSoldSuccessfully:t})),t&&(localStorage.setItem("number",U.number),localStorage.setItem("address",U.address))})).catch((function(e){return console.log(e)})))},children:[Object(b.jsxs)("label",{className:"input",children:["\u10e2\u10d4\u10da\u10d4\u10e4\u10dd\u10dc\u10d8\u10e1 \u10dc\u10dd\u10db\u10d4\u10e0\u10d8",Object(b.jsx)("input",{name:"phone",type:"tel",value:U.number,onChange:function(e){return P(Object(o.a)(Object(o.a)({},U),{},{number:e.target.value}))}})]}),Object(b.jsxs)("label",{className:"input",children:["\u10db\u10d8\u10e1\u10d0\u10db\u10d0\u10e0\u10d7\u10d8",Object(b.jsx)("input",{name:"address",type:"text",value:U.address,onChange:function(e){return P(Object(o.a)(Object(o.a)({},U),{},{address:e.target.value}))}})]}),Object(b.jsx)("button",{className:"".concat(U.isLoading?"loading":""),children:"\u10e8\u10d4\u10d9\u10d5\u10d4\u10d7\u10d0"})]})})]}),Object(b.jsxs)("button",{style:{background:l?"#FCCEE5":void 0,color:l?"#FF6D99":void 0},onClick:function(){U.isSoldSuccessfully?C():O(!l)},children:[t.Payment.toFixed(2),"\u20be"]})]}):Object(b.jsx)(b.Fragment,{})},m=function(e){var t=e.product,n=e.isLoading,i=Object(c.useContext)(f),a=i._toggleProductInCart,r=i._isProductInCart;return n?Object(b.jsxs)("div",{className:"card cardLoading",children:[Object(b.jsx)("div",{}),Object(b.jsx)("p",{}),Object(b.jsx)("p",{}),Object(b.jsx)("button",{className:"flat"})]}):Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("img",{alt:"product",src:t.mainImage?j+"/"+t.mainImage:"https://cdn.mego.ge/4860009810194.jpg"}),Object(b.jsx)("p",{children:t.ProductName}),Object(b.jsxs)("p",{style:{color:!t.isLoading&&r(t)?"#17ab23":void 0},children:[t.Price.toFixed(2),"\u20be"]}),Object(b.jsx)("button",{className:"flat ".concat(t.isLoading?"loading":""," ").concat(!t.isLoading&&r(t)?"green":""),onClick:function(){return function(e){a(e)}(t)},children:r(t)?"\u10d3\u10d0\u10d1\u10e0\u10e3\u10dc\u10d4\u10d1\u10d0":"\u10d0\u10e6\u10d4\u10d1\u10d0"})]},t.Uid)},g=function(){var e=Object(c.useContext)(f),t=e._listProducts,n=e._listCategories,i=Object(c.useRef)(null),a=Object(c.useState)([{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]),r=Object(s.a)(a,2),o=r[0],d=r[1],u=Object(c.useState)([]),l=Object(s.a)(u,2),j=l[0],O=l[1],h=Object(c.useState)([]),g=Object(s.a)(h,2),x=g[0],p=g[1],v=Object(c.useState)({Uid:1}),U=Object(s.a)(v,2),P=U[0],C=U[1],y=Object(c.useState)(!0),S=Object(s.a)(y,2),N=S[0],I=S[1],L=Object(c.useState)([{Uid:-1},{Uid:-2},{Uid:-3},{Uid:-4},{Uid:-5},{Uid:-6},{Uid:-7},{Uid:-8},{Uid:-9},{Uid:-10},{Uid:-11},{Uid:-12},{Uid:-13},{Uid:-14},{Uid:-15},{Uid:-16},{Uid:-17},{Uid:-18},{Uid:-19},{Uid:-20}]),_=Object(s.a)(L,1)[0],k=function e(t,c){return c&&c.ParentUid?(t.unshift(c),e(t,n.find((function(e){return e.Uid===c.ParentUid}))),t):t},E=function(){var e=[];return e=k(e,P)},D=function e(t,c){return c&&c.ParentUid?(t.unshift(c.Uid),n.filter((function(e){return e.ParentUid===c.Uid})).forEach((function(n){return e(t,n)})),t):t},w=function(){var e=[];return e=D(e,P)};Object(c.useEffect)((function(){var e=n.filter((function(e){return e.ParentUid===P.Uid}));d(e.length?e:n.filter((function(e){return e.ParentUid===P.ParentUid}))),p(E()),O(w())}),[P,n]),Object(c.useEffect)((function(){t.length&&n.length&&N&&(I(!1),C(n.find((function(e){return 1===e.Uid}))))}),[t,n]);var F=Object(c.useState)(!1),Q=Object(s.a)(F,2),R=Q[0],M=Q[1],H=Object(c.useState)(""),A=Object(s.a)(H,2),B=A[0],J=A[1];return Object(c.useEffect)((function(){R?i.current.focus():(i.current.blur(),J(""))}),[R]),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:".5em"},children:[Object(b.jsx)("h2",{className:"logo",style:{pointerEvents:N?"none":void 0},onClick:function(){return C(n.find((function(e){return 1===e.Uid})))},children:"JxShop"}),Object(b.jsx)("label",{className:"input search ".concat(R&&"opened"),children:Object(b.jsx)("input",{value:B,onChange:function(e){J(e.target.value),C(n.find((function(e){return 1===e.Uid})))},ref:i,name:"jxshopSearch",type:"text",placeholder:""})}),Object(b.jsx)("button",{onClick:function(){return M((function(e){return!e}))},className:"flat",style:{pointerEvents:N?"none":void 0,marginRight:26,minWidth:150,minHeight:56,width:150,height:56,padding:0},children:N?"":R?"\u2716 \u10d3\u10d0\u10ee\u10e3\u10e0\u10d5\u10d0":"\ud83d\udd0e \u10eb\u10d4\u10d1\u10dc\u10d0"})]}),Object(b.jsxs)("div",{style:{margin:"auto",padding:"1em",width:"100%",maxWidth:"100%",display:"flex",gap:"1em"},children:[Object(b.jsx)("div",{className:"categories",children:(N?[{},{},{},{},{},{},{},{},{},{},{},{}]:o).map((function(e,t){return Object(b.jsx)("button",{style:{pointerEvents:N?"none":void 0,background:P&&P.Uid===e.Uid?"#FEC2DD":void 0},className:"flat",onClick:function(){C(e),window.scroll(0,0)},children:e.CategoryName},t)}))}),Object(b.jsxs)("div",{style:{flexGrow:1},children:[Object(b.jsxs)("div",{className:"breadcrumb",children:[(N||!j.length)&&Object(b.jsx)("div",{style:{background:"#ff3a8f10",borderRadius:"18px 8px",width:60},children:"\u200e"}),x.map((function(e,t){return Object(b.jsxs)("span",{children:[Object(b.jsx)("button",{onClick:function(){return C(e)},children:e.CategoryName})," ",t!==x.length-1&&" \\ "]},e.Uid)}))]}),Object(b.jsxs)("div",{className:"grid gridLoading",children:[!N&&j.length>0&&!t.filter((function(e){return!P||j.includes(e.CategoryUid)&&e.ProductName.toLowerCase().includes(B.toLocaleLowerCase())})).length&&Object(b.jsx)("h2",{style:{whiteSpace:"nowrap"},children:"404: \u10de\u10e0\u10dd\u10d3\u10e3\u10e5\u10e2\u10d4\u10d1\u10d8 \u10d0\u10e0\u10db\u10dd\u10d8\u10eb\u10d4\u10d1\u10dc\u10d0"}),(N||!j.length?_:t.filter((function(e){return!P||j.includes(e.CategoryUid)&&e.ProductName.toLowerCase().includes(B.toLocaleLowerCase())}))).map((function(e,t){return Object(b.jsx)(m,{isLoading:e.Uid<0,product:e},e.Uid)}))]})]})]})]})};var x=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(g,{}),Object(b.jsx)(h,{})]})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),i(e),a(e),r(e)}))};r.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(O,{children:Object(b.jsx)(x,{})})}),document.getElementById("root")),p()}},[[45,1,2]]]);